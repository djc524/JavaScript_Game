<!DOCTYPE html>
<head>
    <title>JavaScript Game</title>
	<link rel="stylesheet" type="text/css" href="new.css"/>
</head>
<body>
  
<div class = 'align'>
    
    <canvas id="myCanvas" width="480" height="320"></canvas>
    
    <canvas id="leaderboard" width="120" height="320"></canvas>
    
</div>
<script>
	// JavaScript code goes here
    
    var canvas = document.getElementById("myCanvas");
    var game = canvas.getContext("2d");
	var sep = canvas.getContext("2d");
	
	
	    //initial ball placement
    var x = canvas.width/2;
    var y = canvas.height-30;
	
	// Button checks
    var rightPressed = false;
    var leftPressed = false;
    var upPressed = false;
    var downPressed = false;
	
	//timer stuff
	var theTimer = setInterval(Timer, 1000);
	var timeSeconds = 0;
	
	
	
	
	//playing music
	var audio = new Audio('coolsong.mp4');
	audio.play();
	
	
	//ball color and stuff
    var ballRadius = 10;

    function ballMovement(){
        
        game.beginPath();
        game.arc(x, y, ballRadius, 0, Math.PI*2);
        game.fillStyle = "red";
        game.fill();
        game.closePath();
    }

    //bullet stuff
    var bulletRadius = 10
    var bulletX = 25;
    var bulletY = 25;

    var otherBullet = 10;

    const bulletArray = [];       

    const bulletProperties = [bulletRadius,bulletX,bulletY,"green"];
    bulletArray.push(bulletProperties);
    bulletArray.push([15,60,60,"blue"]);

    console.log(bulletArray);
    console.log(bulletArray.length);

    function Bullet(){
        var i = 0
        while (i < bulletArray.length){
            game.beginPath();
            game.arc(bulletArray[i][1], bulletArray[i][2], bulletArray[i][0], 0, Math.PI*2);
            game.fillStyle = bulletArray[i][3];
            game.fill();
            game.closePath();
            i++;
        }
    }
	
    function Collision(){
        var i = 0
            while (i < bulletArray.length){
                if (x > (bulletArray[i][1] - bulletArray[i][0]) && x < (bulletArray[i][0] + bulletArray[i][1])) {
        
                    if (y > (bulletArray[i][2] - bulletArray[i][0]) && y < (bulletArray[i][0] + bulletArray[i][2])) {

                    alert("GAME OVER");
                    document.location.reload();
                    clearInterval(interval); // Needed for Chrome to end game
                    }
                }
            i++;
            }
        }
	
	//timer count function
	function Timer(){
		timeSeconds++;
	}
	
	//displaying timer
	function drawTime(){
	sep.fillStyle = "black";
	sep.font = "bold 18px Brush Script MT";
	sep.fillText(timeSeconds, 13, canvas.height - 13);
	}
	
	
    
    function draw() {
    // drawing code
	
	
	game.clearRect(0,0, canvas.width, canvas.height);
	
	ballMovement();

    Bullet();

	drawTime();
        if(rightPressed) {
            x += 7;
            if (x + ballRadius > canvas.width){
            x = canvas.width - ballRadius;
            }
        }
        else if(leftPressed) {
            x -= 7;
            if (x - ballRadius < 0){
            x = ballRadius;
            }
        }
        if(upPressed) {
            y -= 7;
            if (y - ballRadius < 0){
            y = ballRadius;
            }
        }
        else if(downPressed) {
            y += 7;
            if (y + ballRadius > canvas.height){
            y = canvas.height - ballRadius;
            }
        }

        Collision();
        
        //console.log(rightPressed);
	
    }


    
    document.addEventListener("keydown", keyDownHandler, false);
    document.addEventListener("keyup", keyUpHandler, false);

    function keyDownHandler(e) {
        if(e.key == "Right" || e.key == "ArrowRight") {
            rightPressed = true;
        }
        else if(e.key == "Left" || e.key == "ArrowLeft") {
            leftPressed = true;
        }

        if(e.key == "Up" || e.key == "ArrowUp") {
            upPressed = true;
        }
        else if(e.key == "Down" || e.key == "ArrowDown") {
            downPressed = true;
        }
    }

    function keyUpHandler(e) {
        if(e.key == "Right" || e.key == "ArrowRight") {
            rightPressed = false;
        }
        else if(e.key == "Left" || e.key == "ArrowLeft") {
            leftPressed = false;
        }

        if(e.key == "Up" || e.key == "ArrowUp") {
            upPressed = false;
        }
        else if(e.key == "Down" || e.key == "ArrowDown") {
            downPressed = false;
        }
    }

    



    var interval = setInterval(draw, 10);

</script>    
    
    
</body>